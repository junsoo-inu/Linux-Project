#!/bin/bash

# ========================================================
# 기능 4: Git 상태 대시보드
# 현재 Git 저장소의 연결 상태, 커밋 기록, 변경 사항을 한눈에 보여줍니다.
# 작성자: 임준수
# ========================================================

echo ">> Git 상태 대시보드를 실행합니다."

# 추가 - 현재 폴더가 Git 저장소인지 확인. 예외처리 코드
if [ ! -d ".git" ]; then
    echo "오류: 현재 디렉토리는 Git 저장소가 아닙니다."
    echo "      'git init'이 된 프로젝트 폴더에서 실행해주세요."
    exit 1
fi

echo "=========================================="
echo " [1] 원격 저장소 연결 정보 (Remote)"
echo "=========================================="

# git remote -v: 연결된 원격 저장소의 이름과 URL을 출력
remote_info=$(git remote -v)

# -z 옵션: 변수가 비어있는지 확인
if [ -z "$remote_info" ]; then
    echo "연결된 원격 저장소가 없습니다."
else
    echo "$remote_info"
fi
echo ""

echo "=========================================="
echo " [2] 최근 커밋 로그 (Last 3 Commits)"
echo "=========================================="

# git log 명령어 옵션 설명:
# --oneline: 커밋 해시와 메시지를 한 줄로 요약해서 출력
# -n 3: 최근 3개의 커밋만 제한해서 출력
git log --oneline -n 3
echo ""

echo "=========================================="
echo " [3] 변경된 파일 상태 (Status)"
echo "=========================================="
# git status 명령어 옵션 설명:
# -s (short): 변경 상태를 짧고 간결하게 출력
# (예: M = 수정됨, A = 추가됨, ?? = 추적되지 않음)
git status -s
echo "=========================================="